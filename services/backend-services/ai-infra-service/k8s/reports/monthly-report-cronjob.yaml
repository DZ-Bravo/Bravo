# =================================================
# Monthly Report CronJob
# =================================================
apiVersion: batch/v1
kind: CronJob
metadata:
  name: monthly-report
  namespace: bravo-ai-integration-ns
spec:
  schedule: "0 0 28-31 * *"  # 매월 28-31일 자정 (애플리케이션에서 마지막 날 확인)
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: report-generator
            image: 192.168.0.244:30305/bravo/ai-infra-service:latest
            command: ["node", "/app/services/report-script.js", "monthly"]
            envFrom:
            - configMapRef:
                name: ai-infra-config
            - secretRef:
                name: ai-infra-secrets
          restartPolicy: OnFailure

