# =================================================
# LimitRange (revised based on real usage & HPA)
# =================================================

---
# bravo-core-ns - Core Application Services (HPA: 2~5)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-core-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "100m"
      memory: "128Mi"
    defaultRequest:
      cpu: "200m"
      memory: "256Mi"
    default:
      cpu: "500m"
      memory: "512Mi"
    max:
      cpu: "1"
      memory: "1Gi"

---
# bravo-front-ns - Frontend (HPA: 3~5, very light pods)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-front-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "25m"
      memory: "64Mi"
    defaultRequest:
      cpu: "100m"
      memory: "128Mi"
    default:
      cpu: "300m"
      memory: "256Mi"
    max:
      cpu: "500m"
      memory: "512Mi"

---
# bravo-ai-integration-ns - AI / Chatbot / AI Infra (HPA: 2~5, burst)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-ai-integration-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "200m"
      memory: "256Mi"
    defaultRequest:
      cpu: "300m"
      memory: "512Mi"
    default:
      cpu: "700m"
      memory: "1Gi"
    max:
      cpu: "2"
      memory: "2Gi"

---
# bravo-mongo-ns - MongoDB (Stateful, fixed usage)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-mongo-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "500m"
      memory: "1Gi"
    defaultRequest:
      cpu: "500m"
      memory: "1Gi"
    default:
      cpu: "1"
      memory: "2Gi"
    max:
      cpu: "1"
      memory: "2Gi"

---
# bravo-redis-ns - Redis (2~3 replicas, small but latency sensitive)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-redis-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "50m"
      memory: "128Mi"
    defaultRequest:
      cpu: "100m"
      memory: "256Mi"
    default:
      cpu: "300m"
      memory: "512Mi"
    max:
      cpu: "500m"
      memory: "512Mi"

---
# bravo-efk-ns - EFK (Elasticsearch JVM fixed heap)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-efk-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "1"
      memory: "2Gi"
    defaultRequest:
      cpu: "1"
      memory: "2Gi"
    default:
      cpu: "1"
      memory: "2Gi"
    max:
      cpu: "1"
      memory: "2Gi"

---
# bravo-monitoring-ns - Prometheus / Grafana / DaemonSet
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-monitoring-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "100m"
      memory: "256Mi"
    defaultRequest:
      cpu: "200m"
      memory: "512Mi"
    default:
      cpu: "500m"
      memory: "1Gi"
    # max intentionally omitted (DS & Prometheus flexibility)

---
# bravo-platform-ns - CI/CD (Jenkins, Sonar, Agents)
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-platform-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "200m"
      memory: "512Mi"
    defaultRequest:
      cpu: "500m"
      memory: "1Gi"
    default:
      cpu: "1"
      memory: "2Gi"
    max:
      cpu: "2"
      memory: "4Gi"

---
# bravo-backup-ns - Backup / Storage / DS
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
  namespace: bravo-backup-ns
spec:
  limits:
  - type: Container
    min:
      cpu: "50m"
      memory: "64Mi"
    defaultRequest:
      cpu: "100m"
      memory: "128Mi"
    # max omitted (longhorn, backup agents)

